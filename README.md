# å¥èº«è®­ç»ƒè§„åˆ’ Agent (Fitness Planner Agent)

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![React 18](https://img.shields.io/badge/react-18-blue.svg)](https://reactjs.org/)

ä¸€ä¸ªåŸºäº AI çš„æ™ºèƒ½å¥èº«è®­ç»ƒè§„åˆ’å’Œè¥å…»è¿½è¸ªç³»ç»Ÿï¼Œé€šè¿‡å¯¹è¯å¼äº¤äº’ä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„å¥èº«è§£å†³æ–¹æ¡ˆã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [éƒ¨ç½²](#éƒ¨ç½²)
- [è·¯çº¿å›¾](#è·¯çº¿å›¾)

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

å¥èº«è®­ç»ƒè§„åˆ’ Agent æ˜¯ä¸€ä¸ªæ™ºèƒ½åŒ–çš„å¥èº«åŠ©æ‰‹ç³»ç»Ÿï¼Œæ—¨åœ¨è§£å†³å¥èº«çˆ±å¥½è€…åœ¨åˆ¶å®šè®­ç»ƒè®¡åˆ’ã€ç®¡ç†è¥å…»æ‘„å…¥å’Œè¿½è¸ªè¿›åº¦æ–¹é¢çš„æŒ‘æˆ˜ã€‚é€šè¿‡é›†æˆå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œä¸“ä¸šçš„å¥èº«çŸ¥è¯†ï¼Œç³»ç»Ÿèƒ½å¤Ÿï¼š

- ğŸ¤– **æ™ºèƒ½å¯¹è¯**ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€äº¤äº’ï¼Œç†è§£ç”¨æˆ·éœ€æ±‚
- ğŸ“Š **ä¸ªæ€§åŒ–è®¡åˆ’**ï¼šæ ¹æ®ç”¨æˆ·èº«ä½“çŠ¶å†µã€ç›®æ ‡å’Œé¢‘ç‡åŠ¨æ€ç”Ÿæˆè®­ç»ƒå’Œè¥å…»è®¡åˆ’
- ğŸ“ˆ **è¿›åº¦è¿½è¸ª**ï¼šè‡ªåŠ¨åˆ†æè®­ç»ƒè¡¨ç°å’Œèº«ä½“æ•°æ®ï¼Œæä¾›è°ƒæ•´å»ºè®®
- ğŸ”— **æ•°æ®é›†æˆ**ï¼šæ”¯æŒè¿æ¥ä¸»æµå¥èº« APPï¼Œç»Ÿä¸€ç®¡ç†æ•°æ®

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### FR-1: ç”¨æˆ·å¼•å¯¼ä¸ç›®æ ‡è®¾å®š
- æ™ºèƒ½é—®ç­”å¼å¼•å¯¼æ”¶é›†ç”¨æˆ·ä¿¡æ¯
- æ”¯æŒè®¾å®šå¤šç§å¥èº«ç›®æ ‡ï¼ˆå¢è‚Œã€å‡è„‚ã€åŠ›é‡æå‡ç­‰ï¼‰
- è®°å½•èº«ä½“æ•°æ®ã€è®­ç»ƒé¢‘ç‡ã€å™¨æ¢°æ¡ä»¶ç­‰

### FR-2: æ™ºèƒ½è®­ç»ƒè®¡åˆ’å®šåˆ¶
- åŸºäºç”¨æˆ·ç›®æ ‡å’Œé¢‘ç‡è‡ªåŠ¨ç”Ÿæˆå‘¨è®­ç»ƒè®¡åˆ’
- æ”¯æŒå¤šç§è®­ç»ƒåˆ†åŒ–æ–¹å¼ï¼ˆæ¨æ‹‰è…¿ã€éƒ¨ä½åˆ†åŒ–ã€å…¨èº«è®­ç»ƒç­‰ï¼‰
- è¯¦ç»†çš„åŠ¨ä½œã€ç»„æ•°ã€æ¬¡æ•°ã€ä¼‘æ¯æ—¶é—´è§„åˆ’
- AI è§£é‡Šè®­ç»ƒå®‰æ’çš„ç§‘å­¦ä¾æ®

### FR-3: è¥å…»å»ºè®®ä¸è¿½è¸ª
- è‡ªåŠ¨è®¡ç®—æ¯æ—¥å®é‡è¥å…»ç´ éœ€æ±‚ï¼ˆè›‹ç™½è´¨ã€ç¢³æ°´ã€è„‚è‚ªï¼‰
- æä¾›æ¯æ—¥ä¸‰é¤æ­é…å»ºè®®
- æ”¯æŒè‡ªç„¶è¯­è¨€è®°å½•é¥®é£Ÿï¼ˆå¦‚ï¼š"æˆ‘ä¸­åˆåƒäº†150å…‹é¸¡èƒ¸è‚‰"ï¼‰
- å®æ—¶è¿½è¸ªè¥å…»æ‘„å…¥ï¼Œå¯¹æ¯”ç›®æ ‡å¹¶æä¾›åé¦ˆ

### FR-4: è¿›åº¦åˆ†æä¸è°ƒæ•´
- åˆ†æè®­ç»ƒè¡¨ç°å’Œèº«ä½“æ•°æ®å˜åŒ–
- æ£€æµ‹å¹³å°æœŸï¼Œæä¾›çªç ´å»ºè®®
- ç”Ÿæˆå‘¨æŠ¥å’ŒæœˆæŠ¥ï¼Œå¯è§†åŒ–è¿›åº¦æ›²çº¿
- æ™ºèƒ½è°ƒæ•´è®­ç»ƒå¼ºåº¦å’Œè¥å…»æ–¹æ¡ˆ

### FR-5: ç¬¬ä¸‰æ–¹æ•°æ®é›†æˆ (è§„åˆ’ä¸­)
- é€šè¿‡ OAuth 2.0 å®‰å…¨è¿æ¥å¥èº« APP
- è‡ªåŠ¨åŒæ­¥æ­¥æ•°ã€ç¡çœ ã€ä½“é‡ç­‰æ•°æ®
- å‡å°‘æ‰‹åŠ¨è¾“å…¥è´Ÿæ‹…

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**: FastAPI (Python 3.11+)
- **LLM**: OpenAI GPT-4 / Gemini
- **Agent æ¡†æ¶**: LangChain
- **æ•°æ®åº“**: PostgreSQL (å…³ç³»å‹æ•°æ®)
- **å‘é‡æ•°æ®åº“**: ChromaDB (çŸ¥è¯†åº“)
- **ORM**: SQLAlchemy 2.0 (å¼‚æ­¥)

### å‰ç«¯
- **æ¡†æ¶**: React 18 + Vite
- **è·¯ç”±**: React Router v6
- **çŠ¶æ€ç®¡ç†**: Zustand
- **æ•°æ®è·å–**: TanStack Query (React Query)
- **æ ·å¼**: CSS Modules

### éƒ¨ç½²
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **Web æœåŠ¡å™¨**: Nginx (å‰ç«¯)
- **ASGI æœåŠ¡å™¨**: Uvicorn (åç«¯)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker å’Œ Docker Compose
- OpenAI API Key

### ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd Fitness_Plan
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp backend/.env.example backend/.env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„ OpenAI API Key
nano backend/.env
```

3. **å¯åŠ¨æ‰€æœ‰æœåŠ¡**
```bash
docker-compose up -d
```

4. **è®¿é—®åº”ç”¨**
- å‰ç«¯: http://localhost:3000
- åç«¯ API: http://localhost:8000
- API æ–‡æ¡£: http://localhost:8000/docs

### æœ¬åœ°å¼€å‘

#### åç«¯å¼€å‘

```bash
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

#### å‰ç«¯å¼€å‘

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
Fitness_Plan/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ agents/            # AI Agents
â”‚   â”‚   â”‚   â”œâ”€â”€ fitness_agent.py         # ä¸» Agent
â”‚   â”‚   â”‚   â”œâ”€â”€ workout_planner.py       # è®­ç»ƒè®¡åˆ’ç”Ÿæˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ nutrition_planner.py     # è¥å…»è§„åˆ’
â”‚   â”‚   â”‚   â””â”€â”€ progress_analyzer.py     # è¿›åº¦åˆ†æ
â”‚   â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py
â”‚   â”‚   â”‚   â”œâ”€â”€ users.py
â”‚   â”‚   â”‚   â”œâ”€â”€ workouts.py
â”‚   â”‚   â”‚   â”œâ”€â”€ nutrition.py
â”‚   â”‚   â”‚   â””â”€â”€ progress.py
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â”‚   â””â”€â”€ database.py
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ workout.py
â”‚   â”‚   â”‚   â”œâ”€â”€ nutrition.py
â”‚   â”‚   â”‚   â””â”€â”€ progress.py
â”‚   â”‚   â”œâ”€â”€ schemas/           # Pydantic schemas
â”‚   â”‚   â””â”€â”€ main.py            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontend/                   # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/          # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ styles/            # CSS æ ·å¼
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ main.jsx
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ README.md
```

## ğŸ“š API æ–‡æ¡£

### èŠå¤©æ¥å£

#### POST /api/chat/message
å‘é€æ¶ˆæ¯ç»™ AI åŠ©æ‰‹

**è¯·æ±‚ä½“:**
```json
{
  "message": "æˆ‘æƒ³åˆ¶å®šä¸€ä¸ªä¸€å‘¨äº”æ¬¡çš„è®­ç»ƒè®¡åˆ’",
  "conversation_id": "optional-conversation-id",
  "include_history": true
}
```

**å“åº”:**
```json
{
  "message": "AI çš„å›å¤å†…å®¹...",
  "conversation_id": "uuid",
  "intent": "workout_plan",
  "metadata": {}
}
```

### è®­ç»ƒè®¡åˆ’æ¥å£

#### POST /api/workouts/plan/generate
ç”Ÿæˆä¸ªæ€§åŒ–è®­ç»ƒè®¡åˆ’

**å“åº”:**
```json
{
  "success": true,
  "plan": {
    "plan_name": "5å¤©å¢è‚Œè®­ç»ƒè®¡åˆ’",
    "workout_type": "push_pull_legs",
    "frequency_per_week": 5,
    "weekly_schedule": [...]
  }
}
```

### è¥å…»æ¥å£

#### POST /api/nutrition/plan/generate
ç”Ÿæˆè¥å…»è®¡åˆ’

#### POST /api/nutrition/meal/parse
è§£æè‡ªç„¶è¯­è¨€é¥®é£Ÿè®°å½•

**è¯·æ±‚:**
```json
{
  "description": "æˆ‘ä¸­åˆåƒäº†150å…‹é¸¡èƒ¸è‚‰å’Œä¸€ä¸ªè‹¹æœ"
}
```

### è¿›åº¦æ¥å£

#### POST /api/progress/analyze/training
åˆ†æè®­ç»ƒè¿›åº¦

#### POST /api/progress/report/weekly
ç”Ÿæˆå‘¨æŠ¥

å®Œæ•´ API æ–‡æ¡£è¯·è®¿é—®: http://localhost:8000/docs

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åœ¨ `backend/.env` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```bash
# LLM é…ç½®
OPENAI_API_KEY=your-api-key-here
LLM_MODEL=gpt-4-turbo-preview
LLM_TEMPERATURE=0.7

# æ•°æ®åº“
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/fitness_planner

# å®‰å…¨
SECRET_KEY=your-secret-key-here

# CORS
CORS_ORIGINS=http://localhost:3000
```

## ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ Agent

1. åœ¨ `backend/app/agents/` åˆ›å»ºæ–°çš„ Agent ç±»
2. ç»§æ‰¿åŸºç¡€é…ç½®ï¼Œå®šä¹‰ç‰¹å®šçš„ prompts
3. åœ¨ç›¸åº”çš„ API è·¯ç”±ä¸­é›†æˆ

### æ·»åŠ æ–°çš„æ•°æ®æ¨¡å‹

1. åœ¨ `backend/app/models/` å®šä¹‰ SQLAlchemy æ¨¡å‹
2. åœ¨ `backend/app/schemas/` å®šä¹‰ Pydantic schemas
3. åˆ›å»ºæ•°æ®åº“è¿ç§»ï¼ˆä½¿ç”¨ Alembicï¼‰

### å‰ç«¯ç»„ä»¶å¼€å‘

1. åœ¨ `frontend/src/components/` åˆ›å»ºå¯å¤ç”¨ç»„ä»¶
2. åœ¨ `frontend/src/pages/` åˆ›å»ºé¡µé¢ç»„ä»¶
3. ä½¿ç”¨ React Query è¿›è¡Œæ•°æ®è·å–

## ğŸš¢ éƒ¨ç½²

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡**
```bash
# è®¾ç½® DEBUG=False
# ä½¿ç”¨å¼ºå¯†ç å’Œå¯†é’¥
# é…ç½®æ­£ç¡®çš„ CORS_ORIGINS
```

2. **æ„å»ºå’Œå¯åŠ¨**
```bash
docker-compose -f docker-compose.prod.yml up -d
```

3. **æ•°æ®åº“è¿ç§»**
```bash
docker-compose exec backend alembic upgrade head
```

4. **é…ç½®åå‘ä»£ç†**ï¼ˆå¯é€‰ï¼‰
- ä½¿ç”¨ Nginx æˆ– Caddy ä½œä¸ºåå‘ä»£ç†
- é…ç½® SSL è¯ä¹¦ï¼ˆLet's Encryptï¼‰

## ğŸ—º è·¯çº¿å›¾

### V1.0 (å½“å‰)
- âœ… åŸºç¡€æ¶æ„æ­å»º
- âœ… LLM Agent é›†æˆ
- âœ… è®­ç»ƒè®¡åˆ’ç”Ÿæˆ
- âœ… è¥å…»å»ºè®®ç³»ç»Ÿ
- âœ… è¿›åº¦åˆ†æ
- âœ… èŠå¤©ç•Œé¢

### V1.1 (è®¡åˆ’ä¸­)
- [ ] ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- [ ] åŠ¨ä½œåº“ RAG (æ£€ç´¢å¢å¼ºç”Ÿæˆ)
- [ ] è¯­éŸ³è¾“å…¥æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–

### V2.0 (æœªæ¥)
- [ ] å›¾åƒè¯†åˆ«ï¼ˆé£Ÿç‰©è¯†åˆ«ï¼‰
- [ ] ç¬¬ä¸‰æ–¹ APP é›†æˆ
- [ ] AI åŠ¨ä½œçº æ­£ï¼ˆéœ€ç§»åŠ¨ç«¯ APPï¼‰
- [ ] ç¤¾äº¤åŠŸèƒ½

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ– Pull Requestã€‚

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚åœ¨ä½¿ç”¨ä»»ä½•å¥èº«æˆ–è¥å…»å»ºè®®å‰ï¼Œè¯·å’¨è¯¢ä¸“ä¸šçš„å¥èº«æ•™ç»ƒæˆ–è¥å…»å¸ˆã€‚
