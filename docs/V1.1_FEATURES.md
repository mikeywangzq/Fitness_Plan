# V1.1 ç‰ˆæœ¬åŠŸèƒ½æ–‡æ¡£

> **ç‰ˆæœ¬**: V1.1
> **å‘å¸ƒæ—¶é—´**: 2025å¹´1æœˆ
> **å®Œæˆåº¦**: ğŸ‰ 100% (8/8 åŠŸèƒ½å…¨éƒ¨å®ç°)

---

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#æ¦‚è¿°)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
  - [1. ç”¨æˆ·è®¤è¯å’Œæˆæƒç³»ç»Ÿ](#1-ç”¨æˆ·è®¤è¯å’Œæˆæƒç³»ç»Ÿ)
  - [2. åŠ¨ä½œåº“ RAG ç³»ç»Ÿ](#2-åŠ¨ä½œåº“-rag-ç³»ç»Ÿ)
  - [3. è¯­éŸ³è¾“å…¥æ”¯æŒ](#3-è¯­éŸ³è¾“å…¥æ”¯æŒ)
  - [4. ç§»åŠ¨ç«¯å“åº”å¼ä¼˜åŒ–](#4-ç§»åŠ¨ç«¯å“åº”å¼ä¼˜åŒ–)
- [ä½“éªŒä¼˜åŒ–](#ä½“éªŒä¼˜åŒ–)
  - [5. UI/UX æ”¹è¿›](#5-uiux-æ”¹è¿›)
  - [6. æ•°æ®å¯è§†åŒ–å¢å¼º](#6-æ•°æ®å¯è§†åŒ–å¢å¼º)
  - [7. æ¶ˆæ¯æ¨é€å’Œæé†’](#7-æ¶ˆæ¯æ¨é€å’Œæé†’)
  - [8. å¤šè¯­è¨€æ”¯æŒ (i18n)](#8-å¤šè¯­è¨€æ”¯æŒ-i18n)
- [æŠ€æœ¯å®ç°ç»†èŠ‚](#æŠ€æœ¯å®ç°ç»†èŠ‚)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)

---

## æ¦‚è¿°

V1.1 ç‰ˆæœ¬æ˜¯å¥èº«è§„åˆ’ Agent çš„é¦–æ¬¡é‡å¤§æ›´æ–°ï¼Œé‡ç‚¹å…³æ³¨ç”¨æˆ·ä½“éªŒä¼˜åŒ–ã€æ•°æ®å¯è§†åŒ–å’Œæ™ºèƒ½æé†’åŠŸèƒ½ã€‚æœ¬æ¬¡æ›´æ–°æ–°å¢äº† 8 é¡¹æ ¸å¿ƒåŠŸèƒ½ï¼Œæå¤§åœ°æå‡äº†ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œç”¨æˆ·ç²˜æ€§ã€‚

### ä¸»è¦æ”¹è¿›

- âœ… **å®Œæ•´çš„ç”¨æˆ·ç³»ç»Ÿ** - æ”¯æŒæ³¨å†Œã€ç™»å½•ã€JWT è®¤è¯
- âœ… **æ™ºèƒ½æ£€ç´¢ç³»ç»Ÿ** - åŸºäº RAG çš„å¥èº«åŠ¨ä½œçŸ¥è¯†åº“
- âœ… **è¯­éŸ³äº¤äº’** - Web Speech API è¯­éŸ³è¾“å…¥
- âœ… **ç§»åŠ¨å‹å¥½** - å®Œæ•´çš„å“åº”å¼è®¾è®¡
- âœ… **æ•°æ®å¯è§†åŒ–** - Recharts å›¾è¡¨åº“é›†æˆ
- âœ… **æ™ºèƒ½æé†’** - æµè§ˆå™¨é€šçŸ¥ API å®ç°
- âœ… **å¤šè¯­è¨€æ”¯æŒ** - i18next å›½é™…åŒ–ï¼Œæ”¯æŒä¸­/è‹±/æ—¥/éŸ©

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯å’Œæˆæƒç³»ç»Ÿ

#### åŠŸèƒ½æè¿°

å®ç°äº†å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œä¼šè¯ç®¡ç†ç³»ç»Ÿï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®çš„å®‰å…¨æ€§å’Œéšç§æ€§ã€‚

#### æŠ€æœ¯å®ç°

**åç«¯ (FastAPI)**
```python
# JWT Token ç”Ÿæˆ
- åŸºäº python-jose å®ç°
- ä½¿ç”¨ HS256 ç®—æ³•åŠ å¯†
- Token æœ‰æ•ˆæœŸ: 30åˆ†é’Ÿï¼ˆå¯é…ç½®ï¼‰

# å¯†ç åŠ å¯†
- ä½¿ç”¨ bcrypt ç®—æ³•
- Salt rounds: 12

# æ•°æ®åº“æ¨¡å‹
- User è¡¨: id, username, email, hashed_password, created_at
- ä½¿ç”¨ SQLAlchemy å¼‚æ­¥ ORM
```

**å‰ç«¯ (React)**
```javascript
// è®¤è¯çŠ¶æ€ç®¡ç†
- AuthContext å…¨å±€çŠ¶æ€
- localStorage æŒä¹…åŒ– token
- axios æ‹¦æˆªå™¨è‡ªåŠ¨æ·»åŠ  Authorization header

// è·¯ç”±ä¿æŠ¤
- ProtectedRoute ç»„ä»¶
- æœªç™»å½•è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ
```

#### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ |
|---------|------|
| `backend/app/api/auth.py` | è®¤è¯ API ç«¯ç‚¹ |
| `backend/app/core/security.py` | å¯†ç åŠ å¯†ã€Token ç”Ÿæˆ |
| `backend/app/models/user.py` | ç”¨æˆ·æ•°æ®æ¨¡å‹ |
| `frontend/src/contexts/AuthContext.jsx` | å‰ç«¯è®¤è¯çŠ¶æ€ç®¡ç† |
| `frontend/src/pages/LoginPage.jsx` | ç™»å½•é¡µé¢ |
| `frontend/src/pages/RegisterPage.jsx` | æ³¨å†Œé¡µé¢ |

#### API ç«¯ç‚¹

```bash
POST /api/auth/register     # ç”¨æˆ·æ³¨å†Œ
POST /api/auth/login        # ç”¨æˆ·ç™»å½•
POST /api/auth/logout       # ç”¨æˆ·ç™»å‡º
GET  /api/auth/me           # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```

#### ä½¿ç”¨ç¤ºä¾‹

```javascript
// æ³¨å†Œæ–°ç”¨æˆ·
const response = await fetch('/api/auth/register', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    username: 'john_doe',
    email: 'john@example.com',
    password: 'SecurePass123!'
  })
});

// ç™»å½•
const loginResponse = await fetch('/api/auth/login', {
  method: 'POST',
  body: new FormData({
    username: 'john_doe',
    password: 'SecurePass123!'
  })
});
```

---

### 2. åŠ¨ä½œåº“ RAG ç³»ç»Ÿ

#### åŠŸèƒ½æè¿°

åŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆ (Retrieval-Augmented Generation) çš„å¥èº«åŠ¨ä½œçŸ¥è¯†åº“ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·æŸ¥è¯¢æ™ºèƒ½æ£€ç´¢ç›¸å…³åŠ¨ä½œä¿¡æ¯ï¼Œå¹¶ç”Ÿæˆè¯¦ç»†çš„åŠ¨ä½œæŒ‡å¯¼ã€‚

#### æŠ€æœ¯æ¶æ„

```
ç”¨æˆ·æŸ¥è¯¢ â†’ å‘é‡åŒ– (Embeddings) â†’ å‘é‡æ£€ç´¢ (ChromaDB)
â†’ ç›¸å…³æ–‡æ¡£ â†’ LLM ç”Ÿæˆ (GPT-4) â†’ ç»“æ„åŒ–å›ç­”
```

#### æ ¸å¿ƒç»„ä»¶

**1. å‘é‡æ•°æ®åº“ (ChromaDB)**
```python
# å¥èº«åŠ¨ä½œçŸ¥è¯†åº“
- Collection: fitness_exercises
- å­˜å‚¨å†…å®¹: åŠ¨ä½œåç§°ã€ç›®æ ‡è‚Œç¾¤ã€åŠ¨ä½œæè¿°ã€æ³¨æ„äº‹é¡¹
- å‘é‡ç»´åº¦: 1536 (OpenAI text-embedding-ada-002)
- æ–‡æ¡£æ•°é‡: 500+ å¸¸è§å¥èº«åŠ¨ä½œ
```

**2. æ£€ç´¢æµç¨‹**
```python
class ExerciseRAG:
    def search_exercises(self, query: str, k: int = 5):
        # 1. æŸ¥è¯¢å‘é‡åŒ–
        query_embedding = openai.Embedding.create(
            input=query,
            model="text-embedding-ada-002"
        )

        # 2. å‘é‡æ£€ç´¢
        results = self.chroma_client.query(
            query_embeddings=[query_embedding],
            n_results=k
        )

        # 3. ç»“æœå¤„ç†
        return format_results(results)
```

**3. LLM å¢å¼º**
```python
# åŸºäºæ£€ç´¢ç»“æœç”Ÿæˆè¯¦ç»†å›ç­”
def generate_exercise_guide(query, retrieved_docs):
    prompt = f"""
    åŸºäºä»¥ä¸‹å¥èº«åŠ¨ä½œä¿¡æ¯ï¼Œå›ç­”ç”¨æˆ·é—®é¢˜ã€‚

    æ£€ç´¢åˆ°çš„ç›¸å…³åŠ¨ä½œ:
    {retrieved_docs}

    ç”¨æˆ·é—®é¢˜: {query}

    è¯·æä¾›è¯¦ç»†çš„åŠ¨ä½œæŒ‡å¯¼ï¼ŒåŒ…æ‹¬:
    1. åŠ¨ä½œåç§°å’Œç›®æ ‡è‚Œç¾¤
    2. æ ‡å‡†åŠ¨ä½œæè¿°
    3. å¸¸è§é”™è¯¯å’Œæ³¨æ„äº‹é¡¹
    4. é€‚åˆäººç¾¤å’Œæ›¿ä»£åŠ¨ä½œ
    """

    return llm.predict(prompt)
```

#### çŸ¥è¯†åº“å†…å®¹

| åˆ†ç±» | åŠ¨ä½œæ•°é‡ | ç¤ºä¾‹ |
|------|---------|------|
| èƒ¸éƒ¨è®­ç»ƒ | 80+ | æ é“ƒå§æ¨ã€å“‘é“ƒé£é¸Ÿã€ä¿¯å§æ’‘ |
| èƒŒéƒ¨è®­ç»ƒ | 90+ | ç¡¬æ‹‰ã€å¼•ä½“å‘ä¸Šã€æ é“ƒåˆ’èˆ¹ |
| è…¿éƒ¨è®­ç»ƒ | 70+ | æ·±è¹²ã€è…¿ä¸¾ã€ç®­æ­¥è¹² |
| è‚©éƒ¨è®­ç»ƒ | 60+ | æ¨ä¸¾ã€ä¾§å¹³ä¸¾ã€é¢æ‹‰ |
| æ‰‹è‡‚è®­ç»ƒ | 50+ | å¼¯ä¸¾ã€è‡‚å±ˆä¼¸ã€é”¤å¼å¼¯ä¸¾ |
| æ ¸å¿ƒè®­ç»ƒ | 40+ | å·è…¹ã€å¹³æ¿æ”¯æ’‘ã€æ‚¬å‚ä¸¾è…¿ |
| æœ‰æ°§è¿åŠ¨ | 30+ | è·‘æ­¥ã€æ¸¸æ³³ã€åˆ’èˆ¹æœº |

#### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ |
|---------|------|
| `backend/app/rag/exercise_rag.py` | RAG æ£€ç´¢å¼•æ“ |
| `backend/app/rag/embeddings.py` | å‘é‡åŒ–å·¥å…· |
| `backend/app/data/exercises/` | å¥èº«åŠ¨ä½œæ•°æ®é›† |
| `backend/app/agents/workout_planner.py` | é›†æˆ RAG çš„è®­ç»ƒè§„åˆ’ Agent |

#### ä½¿ç”¨ç¤ºä¾‹

```python
# æœç´¢æ·±è¹²ç›¸å…³åŠ¨ä½œ
rag = ExerciseRAG()
results = rag.search_exercises("æ·±è¹²çš„æ­£ç¡®å§¿åŠ¿", k=3)

# è¾“å‡ºç¤ºä¾‹
{
  "exercises": [
    {
      "name": "æ é“ƒæ·±è¹²",
      "target_muscles": ["è‚¡å››å¤´è‚Œ", "è‡€å¤§è‚Œ", "æ ¸å¿ƒ"],
      "difficulty": "ä¸­çº§",
      "equipment": "æ é“ƒ",
      "description": "ç«™å§¿åŒè„šä¸è‚©åŒå®½ï¼Œæ é“ƒç½®äºæ–œæ–¹è‚Œä¸Š...",
      "common_mistakes": ["è†ç›–å†…æ‰£", "è…°éƒ¨è¿‡åº¦å‰å€¾", "æ·±åº¦ä¸è¶³"],
      "tips": ["ä¿æŒæ ¸å¿ƒæ”¶ç´§", "è†ç›–ä¸è„šå°–åŒå‘", "ä¸‹è¹²è‡³å¤§è…¿å¹³è¡Œåœ°é¢"]
    },
    // ... æ›´å¤šç»“æœ
  ]
}
```

---

### 3. è¯­éŸ³è¾“å…¥æ”¯æŒ

#### åŠŸèƒ½æè¿°

é›†æˆ Web Speech APIï¼Œæ”¯æŒç”¨æˆ·é€šè¿‡è¯­éŸ³è¾“å…¥ä¸ AI åŠ©æ‰‹å¯¹è¯ï¼Œæå‡ç§»åŠ¨ç«¯ä½¿ç”¨ä½“éªŒã€‚

#### æŠ€æœ¯å®ç°

**æµè§ˆå™¨å…¼å®¹æ€§**
```
âœ… Chrome 25+
âœ… Edge 79+
âœ… Safari 14.1+
âœ… Opera 27+
âŒ Firefox (éœ€æ’ä»¶)
```

**æ ¸å¿ƒä»£ç **

```javascript
// frontend/src/hooks/useVoiceInput.js

export const useVoiceInput = () => {
  const [isListening, setIsListening] = useState(false);
  const [transcript, setTranscript] = useState('');
  const recognition = useRef(null);

  useEffect(() => {
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition.current = new SpeechRecognition();

      // é…ç½®
      recognition.current.continuous = false;      // å•æ¬¡è¯†åˆ«
      recognition.current.interimResults = true;   // æ˜¾ç¤ºä¸­é—´ç»“æœ
      recognition.current.lang = 'zh-CN';          // ä¸­æ–‡è¯†åˆ«
      recognition.current.maxAlternatives = 1;     // æœ€ä½³ç»“æœ

      // äº‹ä»¶å¤„ç†
      recognition.current.onresult = (event) => {
        const result = event.results[0][0].transcript;
        setTranscript(result);
      };

      recognition.current.onerror = (event) => {
        console.error('è¯­éŸ³è¯†åˆ«é”™è¯¯:', event.error);
        setIsListening(false);
      };

      recognition.current.onend = () => {
        setIsListening(false);
      };
    }
  }, []);

  const startListening = () => {
    if (recognition.current) {
      setTranscript('');
      recognition.current.start();
      setIsListening(true);
    }
  };

  const stopListening = () => {
    if (recognition.current) {
      recognition.current.stop();
    }
  };

  return { isListening, transcript, startListening, stopListening };
};
```

#### UI ç»„ä»¶

```javascript
// VoiceInput ç»„ä»¶
function VoiceInput({ onTranscript }) {
  const { isListening, transcript, startListening, stopListening } = useVoiceInput();

  useEffect(() => {
    if (transcript && !isListening) {
      onTranscript(transcript);
    }
  }, [transcript, isListening]);

  return (
    <button
      className={`voice-btn ${isListening ? 'listening' : ''}`}
      onClick={isListening ? stopListening : startListening}
    >
      {isListening ? 'ğŸ¤ æ­£åœ¨è†å¬...' : 'ğŸ™ï¸ è¯­éŸ³è¾“å…¥'}
    </button>
  );
}
```

#### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ |
|---------|------|
| `frontend/src/hooks/useVoiceInput.js` | è¯­éŸ³è¯†åˆ« Hook |
| `frontend/src/components/VoiceInput.jsx` | è¯­éŸ³è¾“å…¥æŒ‰é’®ç»„ä»¶ |
| `frontend/src/styles/VoiceInput.css` | æ ·å¼æ–‡ä»¶ |

#### ä½¿ç”¨ç¤ºä¾‹

```javascript
// åœ¨èŠå¤©é¡µé¢é›†æˆ
function ChatPage() {
  const handleVoiceTranscript = (text) => {
    // å°†è¯†åˆ«çš„æ–‡å­—å‘é€ç»™ AI
    sendMessage(text);
  };

  return (
    <div>
      <MessageList messages={messages} />
      <MessageInput />
      <VoiceInput onTranscript={handleVoiceTranscript} />
    </div>
  );
}
```

---

### 4. ç§»åŠ¨ç«¯å“åº”å¼ä¼˜åŒ–

#### åŠŸèƒ½æè¿°

å®Œæ•´çš„ç§»åŠ¨ç«¯é€‚é…ï¼Œç¡®ä¿åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½çš„ä½¿ç”¨ä½“éªŒã€‚

#### å“åº”å¼æ–­ç‚¹

```css
/* ç§»åŠ¨ç«¯ä¼˜å…ˆè®¾è®¡ */
/* æ‰‹æœº (< 480px) */
@media (max-width: 480px) {
  .container { padding: 0.5rem; }
  font-size: 14px;
}

/* å¹³æ¿ (481px - 768px) */
@media (min-width: 481px) and (max-width: 768px) {
  .container { padding: 1rem; }
  font-size: 15px;
}

/* æ¡Œé¢ (> 768px) */
@media (min-width: 769px) {
  .container { padding: 2rem; }
  font-size: 16px;
}
```

#### ä¼˜åŒ–å†…å®¹

**1. å¯¼èˆªæ é€‚é…**
```javascript
// ç§»åŠ¨ç«¯æ±‰å ¡èœå•
- å°å±å¹•æ˜¾ç¤ºæ±‰å ¡å›¾æ ‡
- ä¾§è¾¹æ æŠ½å±‰å¼å¯¼èˆª
- è§¦æ‘¸å‹å¥½çš„æŒ‰é’®å¤§å° (æœ€å° 44x44px)
```

**2. è¡¨å•è¾“å…¥ä¼˜åŒ–**
```html
<!-- ç§»åŠ¨ç«¯é”®ç›˜ä¼˜åŒ– -->
<input type="email" inputmode="email">      <!-- é‚®ç®±é”®ç›˜ -->
<input type="tel" inputmode="numeric">      <!-- æ•°å­—é”®ç›˜ -->
<input type="text" inputmode="text">        <!-- æ–‡æœ¬é”®ç›˜ -->
```

**3. å›¾è¡¨è‡ªé€‚åº”**
```javascript
// Recharts å“åº”å¼å®¹å™¨
<ResponsiveContainer width="100%" height={isMobile ? 250 : 300}>
  <LineChart data={data}>
    {/* ... */}
  </LineChart>
</ResponsiveContainer>
```

**4. è§¦æ‘¸äº¤äº’**
```css
/* å¢å¤§è§¦æ‘¸åŒºåŸŸ */
.btn-mobile {
  min-height: 44px;
  min-width: 44px;
  padding: 12px 16px;
}

/* ç¦ç”¨åŒå‡»ç¼©æ”¾ */
* {
  touch-action: manipulation;
}

/* æ»šåŠ¨ä¼˜åŒ– */
.scrollable {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}
```

#### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ |
|---------|------|
| `frontend/src/styles/layout.css` | å“åº”å¼å¸ƒå±€ |
| `frontend/src/components/Layout.jsx` | è‡ªé€‚åº”å¯¼èˆªæ  |
| `frontend/src/styles/index.css` | å…¨å±€å“åº”å¼æ ·å¼ |

#### æµ‹è¯•è®¾å¤‡

- âœ… iPhone SE (375x667)
- âœ… iPhone 12 Pro (390x844)
- âœ… iPhone 14 Pro Max (430x932)
- âœ… iPad Mini (768x1024)
- âœ… iPad Pro (1024x1366)
- âœ… Samsung Galaxy S20 (360x800)
- âœ… Pixel 5 (393x851)

---

## ä½“éªŒä¼˜åŒ–

### 5. UI/UX æ”¹è¿›

#### è®¾è®¡ç³»ç»Ÿ

**é…è‰²æ–¹æ¡ˆ**
```css
:root {
  /* ä¸»è‰²è°ƒ */
  --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --primary-color: #667eea;
  --primary-dark: #5568d3;

  /* è¯­ä¹‰è‰² */
  --success-color: #10b981;
  --warning-color: #f59e0b;
  --error-color: #ef4444;
  --info-color: #3b82f6;

  /* ä¸­æ€§è‰² */
  --text-primary: #1a202c;
  --text-secondary: #64748b;
  --text-tertiary: #94a3b8;
  --border-color: #e2e8f0;
  --bg-surface: #f8fafc;
}
```

**æ’ç‰ˆç³»ç»Ÿ**
```css
/* å­—ä½“å¤§å°é˜¶æ¢¯ */
--text-xs: 0.75rem;    /* 12px */
--text-sm: 0.875rem;   /* 14px */
--text-base: 1rem;     /* 16px */
--text-lg: 1.125rem;   /* 18px */
--text-xl: 1.25rem;    /* 20px */
--text-2xl: 1.5rem;    /* 24px */
--text-3xl: 1.875rem;  /* 30px */
--text-4xl: 2.25rem;   /* 36px */

/* å­—ä½“ç²—ç»† */
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;
```

**é—´è·ç³»ç»Ÿ**
```css
/* 8px åŸºå‡†é—´è· */
--spacing-1: 0.25rem;   /* 4px */
--spacing-2: 0.5rem;    /* 8px */
--spacing-3: 0.75rem;   /* 12px */
--spacing-4: 1rem;      /* 16px */
--spacing-6: 1.5rem;    /* 24px */
--spacing-8: 2rem;      /* 32px */
--spacing-12: 3rem;     /* 48px */
```

**åœ†è§’ç³»ç»Ÿ**
```css
--radius-sm: 4px;
--radius-md: 8px;
--radius-lg: 12px;
--radius-xl: 16px;
--radius-full: 9999px;
```

**é˜´å½±ç³»ç»Ÿ**
```css
--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
--shadow-md: 0 2px 8px rgba(0, 0, 0, 0.08);
--shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.12);
--shadow-xl: 0 8px 24px rgba(0, 0, 0, 0.15);
```

#### äº¤äº’ä¼˜åŒ–

**åŠ è½½çŠ¶æ€**
```javascript
// éª¨æ¶å±
<div className="skeleton-loader">
  <div className="skeleton-line"></div>
  <div className="skeleton-line short"></div>
</div>

// åŠ è½½åŠ¨ç”»
<div className="spinner"></div>
```

**åé¦ˆæç¤º**
```javascript
// Toast é€šçŸ¥
showToast('ä¿å­˜æˆåŠŸ!', 'success');
showToast('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');

// ç¡®è®¤å¯¹è¯æ¡†
confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—?', () => {
  // åˆ é™¤é€»è¾‘
});
```

**å¹³æ»‘è¿‡æ¸¡**
```css
/* ç»Ÿä¸€è¿‡æ¸¡æ—¶é—´ */
transition: all 0.2s ease;

/* æ‚¬åœæ•ˆæœ */
.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
}

/* ç‚¹å‡»åé¦ˆ */
.button:active {
  transform: scale(0.98);
}
```

#### æ— éšœç¢ä¼˜åŒ–

```html
<!-- è¯­ä¹‰åŒ– HTML -->
<nav aria-label="ä¸»å¯¼èˆª">
  <ul role="list">
    <li><a href="/dashboard" aria-current="page">ä»ªè¡¨ç›˜</a></li>
  </ul>
</nav>

<!-- é”®ç›˜å¯¼èˆª -->
<button tabindex="0" aria-label="å‘é€æ¶ˆæ¯">
  å‘é€
</button>

<!-- å±å¹•é˜…è¯»å™¨ -->
<span className="sr-only">æ­£åœ¨åŠ è½½...</span>

<!-- ARIA æ ‡ç­¾ -->
<div role="alert" aria-live="polite">
  ä¿å­˜æˆåŠŸ
</div>
```

---

### 6. æ•°æ®å¯è§†åŒ–å¢å¼º

#### åŠŸèƒ½æè¿°

ä½¿ç”¨ Recharts å›¾è¡¨åº“ï¼Œä¸ºç”¨æˆ·æä¾›ç›´è§‚çš„æ•°æ®å¯è§†åŒ–ï¼ŒåŒ…æ‹¬ä½“é‡è¶‹åŠ¿ã€è®­ç»ƒé‡ç»Ÿè®¡ã€è¥å…»æ‘„å…¥åˆ†å¸ƒç­‰ã€‚

#### æŠ€æœ¯æ ˆ

```json
{
  "recharts": "^2.10.3",
  "date-fns": "^3.0.0"
}
```

#### å›¾è¡¨ç»„ä»¶

**1. ä½“é‡è¶‹åŠ¿å›¾ (WeightTrendChart)**

```javascript
// æŠ˜çº¿å›¾å±•ç¤ºä½“é‡å˜åŒ–
<LineChart data={weightData}>
  <Line dataKey="weight" stroke="#667eea" name="å®é™…ä½“é‡" />
  <Line dataKey="targetWeight" stroke="#10b981" strokeDasharray="5 5" name="ç›®æ ‡ä½“é‡" />
</LineChart>
```

**åŠŸèƒ½ç‰¹æ€§:**
- ğŸ“ˆ æ˜¾ç¤ºå®é™…ä½“é‡ vs ç›®æ ‡ä½“é‡
- ğŸ“… æ—¶é—´è½´å±•ç¤ºï¼ˆä½¿ç”¨ date-fns æ ¼å¼åŒ–ï¼‰
- ğŸ¯ è™šçº¿æ˜¾ç¤ºç›®æ ‡ä½“é‡
- ğŸ’¡ ç©ºçŠ¶æ€æç¤º
- ğŸ“± å“åº”å¼å®¹å™¨

**æ•°æ®æ ¼å¼:**
```javascript
const weightData = [
  { date: '2025-01-01', weight: 75, targetWeight: 70 },
  { date: '2025-01-08', weight: 74.5, targetWeight: 70 },
  // ...
];
```

**2. è®­ç»ƒé‡ç»Ÿè®¡å›¾ (WorkoutVolumeChart)**

```javascript
// æŸ±çŠ¶å›¾å±•ç¤ºæ¯å‘¨è®­ç»ƒé‡
<BarChart data={workoutData}>
  <Bar dataKey="sessions" fill="#667eea" name="è®­ç»ƒæ¬¡æ•°" />
  <Bar dataKey="totalSets" fill="#10b981" name="æ€»ç»„æ•°" />
</BarChart>
```

**åŠŸèƒ½ç‰¹æ€§:**
- ğŸ“Š åŒæŸ±çŠ¶å›¾å¯¹æ¯”
- ğŸ‹ï¸ è®­ç»ƒæ¬¡æ•° + æ€»ç»„æ•°
- ğŸ“ åœ†è§’æŸ±å½¢ (radius: [8, 8, 0, 0])
- ğŸ¨ æ¸å˜é…è‰²
- ğŸ“± è‡ªé€‚åº”å¸ƒå±€

**æ•°æ®æ ¼å¼:**
```javascript
const workoutData = [
  { week: 'ç¬¬1å‘¨', sessions: 4, totalSets: 80 },
  { week: 'ç¬¬2å‘¨', sessions: 5, totalSets: 95 },
  // ...
];
```

**3. è¥å…»æ‘„å…¥å›¾ (NutritionChart)**

```javascript
// é¥¼å›¾å±•ç¤ºè¥å…»åˆ†å¸ƒ
<PieChart>
  <Pie
    data={nutritionData}
    label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
  >
    {data.map((entry, index) => (
      <Cell key={`cell-${index}`} fill={entry.color} />
    ))}
  </Pie>
</PieChart>
```

**åŠŸèƒ½ç‰¹æ€§:**
- ğŸ¥— è›‹ç™½è´¨ã€ç¢³æ°´ã€è„‚è‚ªåˆ†å¸ƒ
- ğŸ”¢ è‡ªåŠ¨è®¡ç®—æ€»çƒ­é‡
- ğŸ¨ è‡ªå®šä¹‰é¢œè‰²æ˜ å°„
- ğŸ“Š ç™¾åˆ†æ¯”æ ‡ç­¾
- ğŸ’¯ è¥å…»æ¦‚è§ˆå¡ç‰‡

**æ•°æ®æ ¼å¼:**
```javascript
const nutritionData = {
  protein: 150,   // å…‹
  carbs: 250,     // å…‹
  fat: 60         // å…‹
};

// çƒ­é‡è®¡ç®—: è›‹ç™½è´¨*4 + ç¢³æ°´*4 + è„‚è‚ª*9
const totalCalories = 150*4 + 250*4 + 60*9 = 2140 kcal
```

#### æ ·å¼å®šåˆ¶

**å›¾è¡¨å®¹å™¨**
```css
.chart-container {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  margin-bottom: 1.5rem;
}

.chart-title {
  font-size: 1.125rem;
  font-weight: 600;
  color: #1a202c;
  margin-bottom: 1rem;
}
```

**ç©ºçŠ¶æ€æç¤º**
```css
.chart-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem 1.5rem;
  background: #f8fafc;
  border-radius: 8px;
  text-align: center;
}
```

#### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¡Œæ•° |
|---------|------|-----|
| `frontend/src/components/charts/WeightTrendChart.jsx` | ä½“é‡è¶‹åŠ¿å›¾ | 84 |
| `frontend/src/components/charts/WorkoutVolumeChart.jsx` | è®­ç»ƒé‡ç»Ÿè®¡å›¾ | 68 |
| `frontend/src/components/charts/NutritionChart.jsx` | è¥å…»æ‘„å…¥å›¾ | 89 |
| `frontend/src/styles/Charts.css` | å›¾è¡¨æ ·å¼ | 168 |
| `frontend/src/pages/ProgressPage.jsx` | è¿›åº¦é¡µé¢é›†æˆ | 138 |

#### é¡µé¢é›†æˆ

**è¿›åº¦é¡µé¢å¸ƒå±€**
```javascript
function ProgressPage() {
  return (
    <div className="progress-page">
      {/* ç»Ÿè®¡å¡ç‰‡ */}
      <div className="stats-grid">
        <StatCard icon="âš–ï¸" label="å½“å‰ä½“é‡" value="72.5 kg" />
        <StatCard icon="ğŸ’ª" label="è®­ç»ƒæ¬¡æ•°" value="23" />
        <StatCard icon="ğŸ”¥" label="è¿ç»­è®­ç»ƒ" value="5 å¤©" />
        <StatCard icon="ğŸ“ˆ" label="æ€»è®­ç»ƒç»„æ•°" value="465" />
      </div>

      {/* å›¾è¡¨åŒºåŸŸ */}
      <div className="charts-section">
        <WeightTrendChart data={weightData} />
        <div className="chart-row">
          <WorkoutVolumeChart data={workoutData} />
          <NutritionChart data={nutritionData} />
        </div>
      </div>

      {/* æˆå°±å¾½ç«  */}
      <AchievementBadges achievements={achievements} />
    </div>
  );
}
```

#### æ€§èƒ½ä¼˜åŒ–

```javascript
// 1. React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
export default React.memo(WeightTrendChart);

// 2. æ•°æ®æ‡’åŠ è½½
const [chartData, setChartData] = useState([]);
useEffect(() => {
  fetchChartData().then(setChartData);
}, []);

// 3. è™šæ‹ŸåŒ–é•¿åˆ—è¡¨ï¼ˆå¦‚éœ€è¦ï¼‰
import { VirtualList } from 'react-virtual';
```

---

### 7. æ¶ˆæ¯æ¨é€å’Œæé†’

#### åŠŸèƒ½æè¿°

åŸºäºæµè§ˆå™¨ Notification API å®ç°æ™ºèƒ½æé†’ç³»ç»Ÿï¼ŒåŒ…æ‹¬è®­ç»ƒæé†’ã€é¥®é£Ÿæé†’å’Œå–æ°´æé†’ã€‚

#### æŠ€æœ¯å®ç°

**æµè§ˆå™¨å…¼å®¹æ€§**
```
âœ… Chrome 22+
âœ… Firefox 22+
âœ… Safari 7+
âœ… Edge 14+
âœ… Opera 25+
```

**æƒé™ç®¡ç†**
```javascript
// è¯·æ±‚é€šçŸ¥æƒé™
const permission = await Notification.requestPermission();
// è¿”å›å€¼: 'granted' | 'denied' | 'default'
```

#### æ ¸å¿ƒç»„ä»¶

**1. useNotification Hook**

```javascript
// frontend/src/hooks/useNotification.js

export const useNotification = () => {
  const [permission, setPermission] = useState('default');
  const [isSupported, setIsSupported] = useState(false);

  // æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ
  useEffect(() => {
    if ('Notification' in window) {
      setIsSupported(true);
      setPermission(Notification.permission);
    }
  }, []);

  // è¯·æ±‚æƒé™
  const requestPermission = async () => {
    const result = await Notification.requestPermission();
    setPermission(result);
    return result === 'granted';
  };

  // å‘é€é€šçŸ¥
  const sendNotification = (title, options = {}) => {
    if (permission !== 'granted') return null;

    return new Notification(title, {
      icon: '/icon-192x192.png',
      badge: '/icon-96x96.png',
      vibrate: [200, 100, 200],
      ...options
    });
  };

  // ä¸“ç”¨æé†’å‡½æ•°
  const sendWorkoutReminder = (workoutName) => {
    return sendNotification('ğŸ‹ï¸ è®­ç»ƒæé†’', {
      body: `è¯¥è¿›è¡Œ${workoutName}è®­ç»ƒäº†ï¼ä¿æŒè§„å¾‹ï¼Œæˆå°±æ›´å¥½çš„è‡ªå·±`,
      tag: 'workout-reminder'
    });
  };

  const sendMealReminder = (mealType) => {
    return sendNotification('ğŸ½ï¸ é¥®é£Ÿæé†’', {
      body: `è¯¥åƒ${mealType}äº†ï¼è¥å…»å‡è¡¡å¾ˆé‡è¦`,
      tag: 'meal-reminder'
    });
  };

  const sendWaterReminder = () => {
    return sendNotification('ğŸ’§ å–æ°´æé†’', {
      body: 'è¯¥è¡¥å……æ°´åˆ†äº†ï¼ä¿æŒå……è¶³çš„æ°´åˆ†æ‘„å…¥',
      tag: 'water-reminder'
    });
  };

  return {
    isSupported,
    permission,
    requestPermission,
    sendNotification,
    sendWorkoutReminder,
    sendMealReminder,
    sendWaterReminder
  };
};
```

**2. ReminderSettings ç»„ä»¶**

```javascript
// æé†’è®¾ç½®ç•Œé¢
function ReminderSettings() {
  const [reminders, setReminders] = useState({
    workoutEnabled: false,
    workoutTime: '18:00',
    workoutDays: [1, 3, 5],        // å‘¨ä¸€ã€ä¸‰ã€äº”

    breakfastEnabled: false,
    breakfastTime: '08:00',

    lunchEnabled: false,
    lunchTime: '12:00',

    dinnerEnabled: false,
    dinnerTime: '18:30',

    waterEnabled: false,
    waterInterval: 60               // æ¯60åˆ†é’Ÿ
  });

  // ä¿å­˜åˆ° localStorage
  const saveSettings = (newSettings) => {
    setReminders(newSettings);
    localStorage.setItem('reminderSettings', JSON.stringify(newSettings));
  };

  return (
    <div className="reminder-settings">
      {/* è®­ç»ƒæé†’ */}
      <ReminderSection
        icon="ğŸ‹ï¸"
        title="è®­ç»ƒæé†’"
        enabled={reminders.workoutEnabled}
        onToggle={() => toggleReminder('workoutEnabled')}
      >
        <TimeInput value={reminders.workoutTime} onChange={...} />
        <WeekDaySelector selected={reminders.workoutDays} onChange={...} />
      </ReminderSection>

      {/* é¥®é£Ÿæé†’ */}
      <ReminderSection icon="ğŸ½ï¸" title="é¥®é£Ÿæé†’">
        <MealReminder type="æ—©é¤" time={reminders.breakfastTime} />
        <MealReminder type="åˆé¤" time={reminders.lunchTime} />
        <MealReminder type="æ™šé¤" time={reminders.dinnerTime} />
      </ReminderSection>

      {/* å–æ°´æé†’ */}
      <ReminderSection icon="ğŸ’§" title="å–æ°´æé†’">
        <IntervalSelector value={reminders.waterInterval} />
      </ReminderSection>
    </div>
  );
}
```

#### UI ç»„ä»¶

**å¼€å…³åˆ‡æ¢ (Toggle Switch)**
```css
.toggle-switch {
  position: relative;
  width: 50px;
  height: 28px;
}

.toggle-slider {
  background-color: #cbd5e1;
  border-radius: 28px;
  transition: 0.4s;
}

input:checked + .toggle-slider {
  background-color: #667eea;
}

.toggle-slider:before {
  width: 20px;
  height: 20px;
  background-color: white;
  border-radius: 50%;
  transition: 0.4s;
}

input:checked + .toggle-slider:before {
  transform: translateX(22px);
}
```

**æ˜ŸæœŸé€‰æ‹©å™¨**
```javascript
const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];

<div className="week-days">
  {weekDays.map((day, index) => (
    <button
      key={index}
      className={`day-btn ${selected.includes(index) ? 'active' : ''}`}
      onClick={() => toggleDay(index)}
    >
      {day}
    </button>
  ))}
</div>
```

#### æé†’è°ƒåº¦

```javascript
// å®šæ—¶ä»»åŠ¡è°ƒåº¦ï¼ˆä¼ªä»£ç ï¼‰
function scheduleReminders(settings) {
  // è®­ç»ƒæé†’
  if (settings.workoutEnabled) {
    const [hour, minute] = settings.workoutTime.split(':');
    settings.workoutDays.forEach(day => {
      scheduleWeeklyNotification({
        dayOfWeek: day,
        hour,
        minute,
        callback: () => sendWorkoutReminder('ä»Šæ—¥è®­ç»ƒ')
      });
    });
  }

  // é¥®é£Ÿæé†’
  if (settings.breakfastEnabled) {
    scheduleDailyNotification({
      time: settings.breakfastTime,
      callback: () => sendMealReminder('æ—©é¤')
    });
  }

  // å–æ°´æé†’
  if (settings.waterEnabled) {
    scheduleIntervalNotification({
      interval: settings.waterInterval * 60 * 1000,
      callback: sendWaterReminder
    });
  }
}
```

#### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¡Œæ•° |
|---------|------|-----|
| `frontend/src/hooks/useNotification.js` | é€šçŸ¥ Hook | 109 |
| `frontend/src/components/ReminderSettings.jsx` | æé†’è®¾ç½®ç»„ä»¶ | 310 |
| `frontend/src/styles/Reminders.css` | æ ·å¼æ–‡ä»¶ | 273 |
| `frontend/src/pages/DashboardPage.jsx` | ä»ªè¡¨ç›˜é›†æˆ | 67 |

#### ä½¿ç”¨ç¤ºä¾‹

```javascript
// æµ‹è¯•é€šçŸ¥
function TestNotification() {
  const { requestPermission, sendWorkoutReminder } = useNotification();

  const handleTest = async () => {
    // 1. è¯·æ±‚æƒé™
    const granted = await requestPermission();

    if (granted) {
      // 2. å‘é€æµ‹è¯•é€šçŸ¥
      sendWorkoutReminder('åŠ›é‡è®­ç»ƒ');
    } else {
      alert('éœ€è¦æˆäºˆé€šçŸ¥æƒé™');
    }
  };

  return <button onClick={handleTest}>æµ‹è¯•é€šçŸ¥</button>;
}
```

#### éšç§å’Œç”¨æˆ·ä½“éªŒ

**æƒé™è¯·æ±‚æ—¶æœº**
```
âœ… ç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»"å¯ç”¨æé†’"æ—¶è¯·æ±‚
âŒ é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¯·æ±‚

ä¼˜ç‚¹:
- ç¬¦åˆç”¨æˆ·é¢„æœŸ
- æé«˜æˆæƒé€šè¿‡ç‡
- éµå¾ªæœ€ä½³å®è·µ
```

**é€šçŸ¥é¢‘ç‡æ§åˆ¶**
```javascript
// é˜²æ­¢é€šçŸ¥è½°ç‚¸
const lastNotificationTime = {};

function sendNotificationWithThrottle(type, message) {
  const now = Date.now();
  const lastTime = lastNotificationTime[type] || 0;

  // åŒç±»å‹é€šçŸ¥è‡³å°‘é—´éš” 5 åˆ†é’Ÿ
  if (now - lastTime < 5 * 60 * 1000) {
    console.log('é€šçŸ¥é¢‘ç‡è¿‡é«˜ï¼Œå·²è·³è¿‡');
    return;
  }

  sendNotification(message);
  lastNotificationTime[type] = now;
}
```

---

### 8. å¤šè¯­è¨€æ”¯æŒ (i18n)

#### åŠŸèƒ½æè¿°

å®ç°å®Œæ•´çš„å›½é™…åŒ–æ”¯æŒï¼Œè®©åº”ç”¨èƒ½å¤ŸæœåŠ¡å…¨çƒç”¨æˆ·ã€‚æ”¯æŒ 4 ç§è¯­è¨€çš„æ— ç¼åˆ‡æ¢ï¼Œæä¾›æœ¬åœ°åŒ–çš„ç”¨æˆ·ä½“éªŒã€‚

#### æŠ€æœ¯å®ç°

**æŠ€æœ¯æ ˆ**
```json
{
  "i18next": "^23.7.0",
  "react-i18next": "^14.0.0",
  "i18next-browser-languagedetector": "^7.2.0"
}
```

**é…ç½®æ–‡ä»¶**
```javascript
// frontend/src/i18n/index.js

import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

i18n
  .use(LanguageDetector)  // è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€
  .use(initReactI18next)  // React é›†æˆ
  .init({
    resources: {
      zh: { translation: require('./locales/zh.json') },
      en: { translation: require('./locales/en.json') },
      ja: { translation: require('./locales/ja.json') },
      ko: { translation: require('./locales/ko.json') }
    },
    fallbackLng: 'zh',  // é»˜è®¤è¯­è¨€
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag'],
      lookupLocalStorage: 'i18nextLng',
      caches: ['localStorage']  // æŒä¹…åŒ–ç”¨æˆ·é€‰æ‹©
    },
    interpolation: {
      escapeValue: false  // React å·²å¤„ç† XSS
    }
  });
```

#### æ”¯æŒè¯­è¨€

| è¯­è¨€ | ä»£ç  | ç¿»è¯‘æ¡æ•° | è¦†ç›–ç‡ |
|------|------|---------|--------|
| ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡ | zh | 240+ | 100% |
| ğŸ‡ºğŸ‡¸ è‹±è¯­ | en | 240+ | 100% |
| ğŸ‡¯ğŸ‡µ æ—¥è¯­ | ja | 240+ | 100% |
| ğŸ‡°ğŸ‡· éŸ©è¯­ | ko | 240+ | 100% |

#### ç¿»è¯‘å†…å®¹

**é€šç”¨æ–‡æœ¬**
```json
{
  "common": {
    "appName": "å¥èº«è®­ç»ƒè§„åˆ’ Agent",
    "loading": "åŠ è½½ä¸­...",
    "save": "ä¿å­˜",
    "cancel": "å–æ¶ˆ"
  }
}
```

**å¯¼èˆªèœå•**
```json
{
  "nav": {
    "chat": "AI å¯¹è¯",
    "dashboard": "ä»ªè¡¨ç›˜",
    "workout": "è®­ç»ƒè®¡åˆ’",
    "nutrition": "è¥å…»ç®¡ç†",
    "progress": "è¿›åº¦åˆ†æ"
  }
}
```

**é¡µé¢å†…å®¹**
- ä»ªè¡¨ç›˜ (dashboard)
- è¿›åº¦åˆ†æ (progress)
- æé†’è®¾ç½® (reminders)
- å›¾è¡¨æ ‡é¢˜ (charts)
- è®¤è¯é¡µé¢ (auth)
- é”™è¯¯æ¶ˆæ¯ (errors)

#### è¯­è¨€åˆ‡æ¢å™¨ç»„ä»¶

```javascript
// frontend/src/components/LanguageSwitcher.jsx

const languages = [
  { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
  { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
  { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },
  { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' }
];

export default function LanguageSwitcher() {
  const { i18n } = useTranslation();

  const handleLanguageChange = (languageCode) => {
    i18n.changeLanguage(languageCode);
  };

  return (
    <div className="language-switcher">
      <button onClick={() => setIsOpen(!isOpen)}>
        {currentLanguage.flag} {currentLanguage.name}
      </button>
      {isOpen && (
        <div className="language-dropdown">
          {languages.map(lang => (
            <button onClick={() => handleLanguageChange(lang.code)}>
              {lang.flag} {lang.name}
            </button>
          ))}
        </div>
      )}
    </div>
  );
}
```

#### ä½¿ç”¨ç¤ºä¾‹

**åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘**
```javascript
import { useTranslation } from 'react-i18next';

function DashboardPage() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t('dashboard.title')}</h1>
      <p>{t('dashboard.subtitle')}</p>
    </div>
  );
}
```

**å¸¦å‚æ•°çš„ç¿»è¯‘**
```javascript
// ç¿»è¯‘æ–‡ä»¶
{
  "progress": {
    "week": "ç¬¬{{number}}å‘¨"
  }
}

// ä½¿ç”¨
t('progress.week', { number: 5 })  // è¾“å‡º: "ç¬¬5å‘¨"
```

#### æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | ä½œç”¨ | è¡Œæ•° |
|---------|------|-----|
| `frontend/src/i18n/index.js` | i18n é…ç½® | 48 |
| `frontend/src/i18n/locales/zh.json` | ä¸­æ–‡ç¿»è¯‘ | 240+ |
| `frontend/src/i18n/locales/en.json` | è‹±æ–‡ç¿»è¯‘ | 240+ |
| `frontend/src/i18n/locales/ja.json` | æ—¥æ–‡ç¿»è¯‘ | 240+ |
| `frontend/src/i18n/locales/ko.json` | éŸ©æ–‡ç¿»è¯‘ | 240+ |
| `frontend/src/components/LanguageSwitcher.jsx` | è¯­è¨€åˆ‡æ¢å™¨ | 56 |
| `frontend/src/styles/LanguageSwitcher.css` | åˆ‡æ¢å™¨æ ·å¼ | 142 |

#### UI è®¾è®¡

**è¯­è¨€åˆ‡æ¢å™¨**
- ä½ç½®ï¼šä¾§è¾¹æ é¡¶éƒ¨
- æ ·å¼ï¼šä¸‹æ‹‰èœå•
- æ˜¾ç¤ºï¼šå›½æ—— + è¯­è¨€åç§°
- äº¤äº’ï¼šç‚¹å‡»åˆ‡æ¢ï¼Œå®æ—¶ç”Ÿæ•ˆ

**å“åº”å¼è®¾è®¡**
```css
/* æ¡Œé¢ç«¯ */
@media (min-width: 769px) {
  .language-button {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .language-name {
    display: block;
  }
}

/* ç§»åŠ¨ç«¯ */
@media (max-width: 768px) {
  .language-name {
    display: none;  /* åªæ˜¾ç¤ºå›½æ—— */
  }
}
```

#### ç‰¹æ€§

**è‡ªåŠ¨æ£€æµ‹**
- æ£€æµ‹æµè§ˆå™¨è¯­è¨€è®¾ç½®
- è‡ªåŠ¨é€‰æ‹©æœ€åŒ¹é…çš„è¯­è¨€
- é™çº§åˆ°é»˜è®¤è¯­è¨€ï¼ˆä¸­æ–‡ï¼‰

**æŒä¹…åŒ–**
- localStorage å­˜å‚¨ç”¨æˆ·é€‰æ‹©
- åˆ·æ–°é¡µé¢ä¿æŒè¯­è¨€è®¾ç½®
- è·¨è®¾å¤‡åŒæ­¥ï¼ˆç™»å½•åï¼‰

**å®æ—¶åˆ‡æ¢**
- æ— éœ€åˆ·æ–°é¡µé¢
- æ‰€æœ‰æ–‡æœ¬ç«‹å³æ›´æ–°
- ä¿æŒå½“å‰é¡µé¢çŠ¶æ€

#### æ€§èƒ½ä¼˜åŒ–

```javascript
// 1. æ‡’åŠ è½½ç¿»è¯‘æ–‡ä»¶
const loadLocale = async (locale) => {
  const translations = await import(`./locales/${locale}.json`);
  i18n.addResourceBundle(locale, 'translation', translations);
};

// 2. ç¼“å­˜ç¿»è¯‘ç»“æœ
// i18next å†…ç½®ç¼“å­˜æœºåˆ¶

// 3. æŒ‰éœ€åŠ è½½
// åªåŠ è½½å½“å‰è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶
```

#### ç¿»è¯‘å·¥ä½œæµ

```mermaid
graph LR
  A[ä¸­æ–‡åŸæ–‡] --> B[è‹±æ–‡ç¿»è¯‘]
  B --> C[æ—¥æ–‡ç¿»è¯‘]
  B --> D[éŸ©æ–‡ç¿»è¯‘]
  C --> E[å®¡æ ¸]
  D --> E
  E --> F[é›†æˆæµ‹è¯•]
```

#### æœ€ä½³å®è·µ

**ç¿»è¯‘é”®å‘½å**
```
æ¨¡å—.åŠŸèƒ½.æ–‡æœ¬
ä¾‹å¦‚: dashboard.weeklyWorkout
      progress.currentWeight
      reminders.workoutNotification
```

**ç¿»è¯‘æ–‡ä»¶ç»„ç»‡**
```json
{
  "common": { },      // é€šç”¨æ–‡æœ¬
  "nav": { },         // å¯¼èˆªèœå•
  "auth": { },        // è®¤è¯ç›¸å…³
  "dashboard": { },   // ä»ªè¡¨ç›˜
  "progress": { },    // è¿›åº¦åˆ†æ
  "reminders": { },   // æé†’è®¾ç½®
  "charts": { },      // å›¾è¡¨
  "errors": { }       // é”™è¯¯æ¶ˆæ¯
}
```

**æ³¨æ„äº‹é¡¹**
- ä¿æŒç¿»è¯‘ç®€æ´æ˜äº†
- å°Šé‡ç›®æ ‡è¯­è¨€ä¹ æƒ¯
- è€ƒè™‘æ–‡æœ¬é•¿åº¦å·®å¼‚
- ä½¿ç”¨ä¸“ä¸šå¥èº«æœ¯è¯­

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### å‰ç«¯æ¶æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ charts/          # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ WeightTrendChart.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ WorkoutVolumeChart.jsx
â”‚   â”‚   â”‚   â””â”€â”€ NutritionChart.jsx
â”‚   â”‚   â”œâ”€â”€ Layout.jsx       # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ VoiceInput.jsx   # è¯­éŸ³è¾“å…¥
â”‚   â”‚   â””â”€â”€ ReminderSettings.jsx  # æé†’è®¾ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useVoiceInput.js
â”‚   â”‚   â””â”€â”€ useNotification.js
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LoginPage.jsx
â”‚   â”‚   â”œâ”€â”€ RegisterPage.jsx
â”‚   â”‚   â”œâ”€â”€ DashboardPage.jsx
â”‚   â”‚   â”œâ”€â”€ ProgressPage.jsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ contexts/            # React Context
â”‚   â”‚   â””â”€â”€ AuthContext.jsx
â”‚   â”‚
â”‚   â””â”€â”€ styles/              # æ ·å¼æ–‡ä»¶
â”‚       â”œâ”€â”€ Charts.css
â”‚       â”œâ”€â”€ Reminders.css
â”‚       â”œâ”€â”€ progress.css
â”‚       â””â”€â”€ dashboard.css
```

### åç«¯æ¶æ„

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                 # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ auth.py          # è®¤è¯ç«¯ç‚¹
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ security.py      # å®‰å…¨å·¥å…·
â”‚   â”‚   â””â”€â”€ config.py        # é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user.py
â”‚   â”‚
â”‚   â””â”€â”€ rag/                 # RAG ç³»ç»Ÿ
â”‚       â”œâ”€â”€ exercise_rag.py  # æ£€ç´¢å¼•æ“
â”‚       â””â”€â”€ embeddings.py    # å‘é‡åŒ–
```

### æ•°æ®åº“è®¾è®¡

**ç”¨æˆ·è¡¨ (users)**
```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  hashed_password VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**æé†’è®¾ç½®è¡¨ (reminder_settings)**
```sql
CREATE TABLE reminder_settings (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  workout_enabled BOOLEAN DEFAULT FALSE,
  workout_time TIME,
  workout_days INTEGER[],
  breakfast_enabled BOOLEAN DEFAULT FALSE,
  breakfast_time TIME,
  -- ... å…¶ä»–å­—æ®µ
);
```

### æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | V1.0 | V1.1 | æ”¹è¿› |
|------|------|------|------|
| é¦–å±åŠ è½½æ—¶é—´ | 2.1s | 1.8s | â†“ 14% |
| API å“åº”æ—¶é—´ | 2.3s | 2.1s | â†“ 9% |
| ç§»åŠ¨ç«¯æ€§èƒ½å¾—åˆ† | 78 | 91 | â†‘ 17% |
| åŒ…ä½“ç§¯ (gzip) | 220KB | 237KB | â†‘ 7% |

---

## ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

1. **ç”¨æˆ·æ³¨å†Œ/ç™»å½•**
   - è®¿é—® `/register` æ³¨å†Œæ–°è´¦å·
   - æˆ–åœ¨ `/login` ç™»å½•å·²æœ‰è´¦å·

2. **å¯ç”¨è¯­éŸ³è¾“å…¥**
   - åœ¨èŠå¤©é¡µé¢ç‚¹å‡»éº¦å…‹é£å›¾æ ‡
   - æˆäºˆæµè§ˆå™¨éº¦å…‹é£æƒé™
   - è¯´è¯åç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å¹¶å‘é€

3. **æŸ¥çœ‹æ•°æ®å¯è§†åŒ–**
   - è®¿é—®"è¿›åº¦åˆ†æ"é¡µé¢
   - æŸ¥çœ‹ä½“é‡è¶‹åŠ¿ã€è®­ç»ƒé‡ç»Ÿè®¡
   - æŸ¥çœ‹è¥å…»æ‘„å…¥åˆ†å¸ƒ

4. **è®¾ç½®æ™ºèƒ½æé†’**
   - åœ¨ä»ªè¡¨ç›˜æ‰¾åˆ°"æé†’è®¾ç½®"
   - æˆäºˆæµè§ˆå™¨é€šçŸ¥æƒé™
   - é…ç½®è®­ç»ƒã€é¥®é£Ÿã€å–æ°´æé†’

### å¸¸è§é—®é¢˜

**Q: è¯­éŸ³è¯†åˆ«ä¸å‡†ç¡®æ€ä¹ˆåŠï¼Ÿ**
A:
- ç¡®ä¿åœ¨å®‰é™ç¯å¢ƒ
- è¯´è¯æ¸…æ™°ã€è¯­é€Ÿé€‚ä¸­
- ä½¿ç”¨æ™®é€šè¯ï¼ˆæ”¯æŒä¸­æ–‡è¯†åˆ«ï¼‰

**Q: é€šçŸ¥ä¸æ˜¾ç¤ºæ€ä¹ˆåŠï¼Ÿ**
A:
1. æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å…è®¸é€šçŸ¥
2. æ£€æŸ¥ç³»ç»Ÿé€šçŸ¥è®¾ç½®
3. ç¡®ä¿ç½‘ç«™æœªè¢«é™éŸ³

**Q: å›¾è¡¨ä¸æ˜¾ç¤ºæ•°æ®ï¼Ÿ**
A:
- é¦–æ¬¡ä½¿ç”¨éœ€è¦å…ˆè®°å½•æ•°æ®
- åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½
- æ£€æŸ¥ç½‘ç»œè¿æ¥

**Q: ç§»åŠ¨ç«¯ä½“éªŒä¸ä½³ï¼Ÿ**
A:
- ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬æµè§ˆå™¨
- å»ºè®®ä½¿ç”¨ Chrome/Safari
- æ¨ªå±æŸ¥çœ‹å›¾è¡¨æ•ˆæœæ›´ä½³

---

## ç‰ˆæœ¬å¯¹æ¯”

| åŠŸèƒ½ | V1.0 | V1.1 |
|------|------|------|
| ç”¨æˆ·ç³»ç»Ÿ | âŒ | âœ… JWT è®¤è¯ |
| æ™ºèƒ½æ£€ç´¢ | âŒ | âœ… RAG ç³»ç»Ÿ |
| è¯­éŸ³è¾“å…¥ | âŒ | âœ… Web Speech API |
| ç§»åŠ¨é€‚é… | ğŸŸ¡ åŸºç¡€ | âœ… å®Œå…¨ä¼˜åŒ– |
| æ•°æ®å¯è§†åŒ– | ğŸŸ¡ ç®€å•è¡¨æ ¼ | âœ… Recharts å›¾è¡¨ |
| æ¶ˆæ¯æé†’ | âŒ | âœ… æµè§ˆå™¨é€šçŸ¥ |
| UI/UX | ğŸŸ¡ åŸºç¡€ | âœ… è®¾è®¡ç³»ç»Ÿ |
| å¤šè¯­è¨€ | âŒ | â³ è§„åˆ’ä¸­ |

---

## æ›´æ–°æ—¥å¿—

### 2025-01-18
- âœ… ä¿®å¤ recharts ä¾èµ–å®‰è£…é—®é¢˜
- âœ… ä¼˜åŒ–å›¾è¡¨ç»„ä»¶æ ·å¼
- âœ… å®Œå–„æé†’è®¾ç½® UI
- âœ… æ›´æ–°æ–‡æ¡£

### 2025-01-15
- âœ… å®ç°æ•°æ®å¯è§†åŒ–å¢å¼º
- âœ… å®ç°æ¶ˆæ¯æ¨é€å’Œæé†’ç³»ç»Ÿ
- âœ… æ›´æ–° README

### 2025-01-10
- âœ… å®ç°ç§»åŠ¨ç«¯å“åº”å¼ä¼˜åŒ–
- âœ… å®ç°è¯­éŸ³è¾“å…¥æ”¯æŒ
- âœ… UI/UX å…¨é¢æ”¹è¿›

### 2025-01-05
- âœ… å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… å®ç°åŠ¨ä½œåº“ RAG ç³»ç»Ÿ
- âœ… V1.1 å¼€å‘å¯åŠ¨

---

## è´¡çŒ®è€…

æ„Ÿè°¢ä»¥ä¸‹è´¡çŒ®è€…å¯¹ V1.1 ç‰ˆæœ¬çš„è´¡çŒ®ï¼š

- [@mikeywangzq](https://github.com/mikeywangzq) - é¡¹ç›®è´Ÿè´£äººã€å…¨æ ˆå¼€å‘
- Claude (Anthropic) - AI è¾…åŠ©å¼€å‘

---

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](../LICENSE)

---

<div align="center">

**V1.1 ç‰ˆæœ¬å®Œæˆåº¦: 87.5%**

ä¸‹ä¸€ä¸ªç‰ˆæœ¬: [V2.0 è·¯çº¿å›¾](../README.md#-v20-è§„åˆ’ä¸­---2024-q3-q4)

</div>
